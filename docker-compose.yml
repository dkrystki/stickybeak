version: '2'

services:
  django_srv:
    container_name: django-srv
    build:
      dockerfile: ./tests/django_srv/Dockerfile
      context: .
    command: >
        bash -c "pipenv run python manage.py migrate &&
                 pipenv run python manage.py runserver 0.0.0.0:8000"
    restart: always
    networks:
      - network

  stickybeak:
    container_name: stickybeak
    build: .
    command: "tail -f /dev/null"
    restart: always
    networks:
      - network

  flask_srv:
    container_name: flask-srv
    build:
      dockerfile: ./tests/flask_srv/Dockerfile
      context: .
    command: "pipenv run flask run --host=0.0.0.0 --port=5000"
    restart: always
    networks:
      - network

networks:
  network:
